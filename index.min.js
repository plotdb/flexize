!function(){var t,e=function(t){return null==t&&(t={}),this._={gutterInited:new WeakMap,opt:t,root:"string"==typeof t.root?document.body.querySelector(t.root):t.root,selector:{gutter:t.gutterSelector||"& > .flexize-gutter, & > div > .flexize-gutter",fixed:t.fixedSelector||"& > .flexize-fixed"}},this.build(),this.estimate(),this};e.prototype=((t=Object.create(Object.prototype)).dir=function(){var t;return(t=this._.dir)||(t=getComputedStyle(this._.root),this._.cssdir=t.flexDirection,this._.dir="row"===(t=this._.cssdir||"row")||"row-reverse"===t?"row":"column")},t.attr=function(){return"row"===this.dir()?"width":"height"},t.reverse=function(){return this.dir(),!!/reverse/.exec(this._.cssdir||"")},t.estimate=function(){var t,e=this.attr(),r=Array.from(this._.root.childNodes).filter(function(t){return t instanceof Element}),i=r.map(function(t){return+getComputedStyle(t).flexGrow}),n=i.reduce(function(t,e){return t+e},0);return r.map(function(t){return t.style.flexGrow=0}),t=this._.root.getBoundingClientRect()[e]-r.map(function(t){return t.getBoundingClientRect()[e]}).reduce(function(t,e){return t+e},0),r.map(function(t,e){return t.style.flexGrow=i[e]}),this._.freeSpace=t,this._.totalGrow=n,this._.initialGrow=i},t.build=function(){var e,o=this;return this._.gutters=Array.from(this._.root.querySelectorAll(this._.selector.gutter)),this._.gutterSet=new Set(this._.gutters),e=new Set,this._.gutters.map(function(t){return o._getSibling(t).map(function(t){if(!e.has(t))return e.add(t)})}),this._.panes=Array.from(e),this._.gutters.forEach(function(n){if(!o._.gutterInited.get(n))return o._.gutterInited.set(n,!0),n.addEventListener("mousedown",function(t){var e,r,i;if(o.estimate(),e=o.attr(),r=o._visibleSibling(n,-1),i=o._visibleSibling(n,1),r&&i)return o._.drag={ptr:{x:t.clientX,y:t.clientY},g:n,p:r,n:i,s:{p:r.getBoundingClientRect()[e],n:i.getBoundingClientRect()[e]},f:{p:+getComputedStyle(r).flexGrow,n:+getComputedStyle(i).flexGrow}},window.addEventListener("mousemove",o._.moveHandler=function(t){return o._moveHandler(t)})})})},t._moveHandler=function(t){var e,r,i,n,o,s,u,l;if((o=this._.drag)&&1&t.buttons)return this.attr(),u=this.reverse(),r=(e=(t="row"===this.dir()?t.clientX-o.ptr.x:t.clientY-o.ptr.y)<0?[o.p,o.n]:[o.n,o.p])[0],i=e[1],n=(e=t<0?[o.s.p,o.s.n]:[o.s.n,o.s.p])[0],l=e[1],o=(e=t<0?[o.f.p,o.f.n]:[o.f.n,o.f.p])[0],s=e[1],u&&(r=(e=[i,r,l,n,s,o])[0],i=e[1],o=e[4],s=e[5]),l=s+(o-(u=0<(e=o+-Math.abs(t/this._.freeSpace)*this._.totalGrow)?e:0)),r.style.flexGrow=u,i.style.flexGrow=l;this._.drag=null,window.removeEventListener("mousemove",this._.moveHandler)},t.set=function(r){return null==r&&(r=[]),this._.panes.map(function(t,e){return t.style.flexGrow=r[e]||0}),this.estimate()},t.reset=function(){var r=this;return Array.from(this._.root.childNodes).filter(function(t){return t instanceof Element}).map(function(t,e){return t.style.flexGrow=r._.initialGrow[e]}),this.build(),this.estimate()},t._getSibling=function(t){for(var e=t;e.parentNode!==this._.root;)e=e.parentNode;return t!==e?[e,e.nextSibling]:[e.previousSibling,e.nextSibling]},t._visibleSibling=function(t,e){for(e=e<0?"previousSibling":"nextSibling",t=Object.fromEntries(this._getSibling(t).map(function(t,e){return[["previousSibling","nextSibling"][e],t]}));(t=t[e])&&(!(t instanceof Element)||"none"===getComputedStyle(t).display||this._.gutterSet.has(t)||t.matches(this._.selector.fixed)););return t},t),"undefined"!=typeof window&&null!==window?window.flexize=e:module.exports=e}.call(this);
