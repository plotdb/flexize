!function(){var t,e;(t=function(t){return null==t&&(t={}),this._={evthdr:{},gutterInited:new WeakMap,opt:t,root:"string"==typeof t.root?document.body.querySelector(t.root):t.root,selector:{gutter:t.gutterSelector||"& > .flexize-gutter, & > div > .flexize-gutter",fixed:t.fixedSelector||"& > .flexize-fixed"}},this.build(),this.estimate(),this}).prototype=((e=Object.create(Object.prototype)).on=function(t,r){var i=this;return(Array.isArray(t)?t:[t]).map(function(t){var e;return((e=i._.evthdr)[t]||(e[t]=[])).push(r)})},e.fire=function(t){for(var e,r,i,n,o=[],s=[],u=1,l=arguments.length;u<l;++u)s.push(arguments[u]);for(e=s,u=0,i=(r=this._.evthdr[t]||[]).length;u<i;++u)n=r[u],o.push(n.apply(this,e));return o},e.dir=function(t){var e;return null!=(t=(null!=t?t:{}).reset)&&t||!this._.dir?(e=getComputedStyle(this._.root),this._.cssdir=e.flexDirection,this._.dir="row"===(t=this._.cssdir||"row")||"row-reverse"===t?"row":"column"):this._.dir},e.attr=function(t){return"row"===this.dir(t)?"width":"height"},e.reverse=function(t){return this.dir(t),!!/reverse/.exec(this._.cssdir||"")},e.estimate=function(){var e,t,r,i,n;return this.dir({reset:!0}),e=this.attr(),t=Array.from(this._.root.childNodes).filter(function(t){return t instanceof Element}),i=(r=t.map(function(t){return+getComputedStyle(t).flexGrow})).reduce(function(t,e){return t+e},0),t.map(function(t){return t.style.flexGrow=0}),n=this._.root.getBoundingClientRect()[e]-t.map(function(t){return t.getBoundingClientRect()[e]}).reduce(function(t,e){return t+e},0),t.map(function(t,e){return t.style.flexGrow=r[e]}),this._.freeSpace=n,this._.totalGrow=i,this._.initialGrow=r},e.build=function(){var e,r,i,o=this;return this._.gutters=Array.from(this._.root.querySelectorAll(this._.selector.gutter)),this._.gutterSet=new Set(this._.gutters),e=new Set,this._.gutters.map(function(t){return o._getSibling(t).map(function(t){if(!e.has(t))return e.add(t)})}),this._.panes=Array.from(e),this._.root.addEventListener("mousedown",function(t){var e=t.target;if(!o._.gutterInited.get(e)&&((t,e)=>{for(var r=-1,i=e.length>>>0;++r<i;)if(t===e[r])return 1})(e,Array.from(o._.root.querySelectorAll(o._.selector.gutter))))return i(e),r(e)(t)}),r=function(n){return function(t){var e,r,i;if(o.fire("resize:start"),o.estimate(),e=o.attr(),r=o._visibleSibling(n,-1),i=o._visibleSibling(n,1),r&&i)return o._.drag={ptr:{x:t.clientX,y:t.clientY},g:n,p:r,n:i,s:{p:r.getBoundingClientRect()[e],n:i.getBoundingClientRect()[e]},f:{p:+getComputedStyle(r).flexGrow,n:+getComputedStyle(i).flexGrow}},window.addEventListener("mousemove",o._.moveHandler=function(t){return o._moveHandler(t)})}},i=function(t){if(!o._.gutterInited.get(t))return o._.gutterInited.set(t,!0),t.addEventListener("mousedown",r(t))},this._.gutters.forEach(i)},e._moveHandler=function(t){var e,r,i,n,o,s,u,l;if((o=this._.drag)&&1&t.buttons)return this.attr(),u=this.reverse(),r=(e=(t="row"===this.dir()?t.clientX-o.ptr.x:t.clientY-o.ptr.y)<0?[o.p,o.n]:[o.n,o.p])[0],i=e[1],n=(e=t<0?[o.s.p,o.s.n]:[o.s.n,o.s.p])[0],l=e[1],o=(e=t<0?[o.f.p,o.f.n]:[o.f.n,o.f.p])[0],s=e[1],u&&(r=(e=[i,r,l,n,s,o])[0],i=e[1],o=e[4],s=e[5]),l=s+(o-(u=0<(e=o+-Math.abs(t/this._.freeSpace)*this._.totalGrow)?e:0)),r.style.flexGrow=u,i.style.flexGrow=l;this._.drag=null,window.removeEventListener("mousemove",this._.moveHandler),this.fire("resize:end")},e.set=function(r){return null==r&&(r=[]),this._.panes.map(function(t,e){return t.style.flexGrow=r[e]||0}),this.estimate()},e.reset=function(){var r=this;return Array.from(this._.root.childNodes).filter(function(t){return t instanceof Element}).map(function(t,e){return t.style.flexGrow=r._.initialGrow[e]}),this.build(),this.estimate()},e._getSibling=function(t){for(var e=t;e.parentNode!==this._.root;)e=e.parentNode;return t!==e?t.previousSibling&&!t.nextSibling?[e,e.nextSibling]:!t.previousSibling&&e.nextSibling?[e.previousSibling,e]:[e.previousSibling||e,e.nextSibling||e]:[e.previousSibling,e.nextSibling]},e._visibleSibling=function(t,e){for(e=e<0?"previousSibling":"nextSibling",t=Object.fromEntries(this._getSibling(t).map(function(t,e){return[["previousSibling","nextSibling"][e],t]}));(t=t[e])&&(!(t instanceof Element)||"none"===getComputedStyle(t).display||this._.gutterSet.has(t)||t.matches(this._.selector.fixed)););return t},e),"undefined"!=typeof window&&null!==window?window.flexize=t:module.exports=t}.call(this);
