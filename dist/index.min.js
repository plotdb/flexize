!function(){var t,e=function(t){var f,c=this;return this._={opt:t=null==t?{}:t,root:"string"==typeof t.root?document.body.querySelector(t.root):t.root,selector:{gutter:t.gutterSelector||".flexize-gutter",fixed:t.fixedSelector||".flexize-fixed"}},this.build(),this.estimate(),this._.gutters.forEach(function(n){return n.addEventListener("mousedown",function(t){var e,r,i;if(c.estimate(),e=c.attr(),r=(i=[n.previousSibling,n.nextSibling])[0],i=i[1],r=c._visibleSibling(n,-1),i=c._visibleSibling(n,1),r&&i)return c._.drag={ptr:{x:t.clientX,y:t.clientY},g:n,p:r,n:i,s:{p:r.getBoundingClientRect()[e],n:i.getBoundingClientRect()[e]},f:{p:+getComputedStyle(r).flexGrow,n:+getComputedStyle(i).flexGrow}},window.addEventListener("mousemove",f)})}),f=function(t){var e,r,i,n,o,s,u,l;if((o=c._.drag)&&1&t.buttons)return c.attr(),u=c.reverse(),r=(e=(t="row"===c.dir()?t.clientX-o.ptr.x:t.clientY-o.ptr.y)<0?[o.p,o.n]:[o.n,o.p])[0],i=e[1],n=(e=t<0?[o.s.p,o.s.n]:[o.s.n,o.s.p])[0],l=e[1],o=(e=t<0?[o.f.p,o.f.n]:[o.f.n,o.f.p])[0],s=e[1],u&&(r=(e=[i,r,l,n,s,o])[0],i=e[1],o=e[4],s=e[5]),l=s+(o-(u=0<(e=o+-Math.abs(t/c._.freeSpace)*c._.totalGrow)?e:0)),r.style.flexGrow=u,i.style.flexGrow=l;c._.drag=null,window.removeEventListener("mousemove",f)},this};e.prototype=((t=Object.create(Object.prototype)).dir=function(){var t;return(t=this._.dir)||(t=getComputedStyle(this._.root),this._.cssdir=t.flexDirection,this._.dir="row"===(t=this._.cssdir||"row")||"row-reverse"===t?"row":"column")},t.attr=function(){return"row"===this.dir()?"width":"height"},t.reverse=function(){return this.dir(),!!/reverse/.exec(this._.cssdir||"")},t.estimate=function(){var t,e=this.attr(),r=Array.from(this._.root.childNodes),i=r.map(function(t){return+getComputedStyle(t).flexGrow}),n=i.reduce(function(t,e){return t+e},0);return r.map(function(t){return t.style.flexGrow=0}),t=this._.root.getBoundingClientRect()[e]-r.map(function(t){return t.getBoundingClientRect()[e]}).reduce(function(t,e){return t+e},0),r.map(function(t,e){return t.style.flexGrow=i[e]}),this._.freeSpace=t,this._.totalGrow=n,this._.intialGrow=i},t.build=function(){var e;return this._.gutters=Array.from(this._.root.querySelectorAll(this._.selector.gutter)),this._.gutterSet=new Set(this._.gutters),e=new Set,this._.gutters.map(function(t){return[t.previousSibling,t.nextSibling].map(function(t){if(!e.has(t))return e.add(t)})}),this._.panes=Array.from(e)},t.set=function(r){return null==r&&(r=[]),this._.panes.map(function(t,e){return t.style.flexGrow=r[e]||0}),this.estimate()},t.reset=function(){var r=this;return Array.from(this._.root.childNodes).map(function(t,e){return t.style.flexGrow=r._.initialGrow[e]}),this.build(),this.estimate()},t._visibleSibling=function(t,e){for(e=e<0?"previousSibling":"nextSibling";(t=t[e])&&("none"===getComputedStyle(t).display||this._.gutterSet.has(t)||t.matches(this._.selector.fixed)););return t},t),"undefined"!=typeof window&&null!==window?window.flexize=e:module.exports=e}.call(this);
