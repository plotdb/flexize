!function(){var t,e=function(t){var o,u=this;return this._={opt:t=null==t?{}:t,selector:t.gutterSelector||".flexize-gutter"},this.root=t.root,this.build(),this.estimate(),o=function(t,e){for(e=e<0?"previousSibling":"nextSibling";(t=t[e])&&("none"===getComputedStyle(t).display||u._.gutterSet.has(t)||t.classList.contains("flexize-fixed")););return t},this._.gutters.forEach(function(i){return i.addEventListener("mousedown",function(t){var e,n,r;if(u.estimate(),e=u.attr(),n=(r=[i.previousSibling,i.nextSibling])[0],r=r[1],n=o(i,-1),r=o(i,1),console.log(n,r),n&&r)return u._.drag={ptr:{x:t.clientX,y:t.clientY},g:i,p:n,n:r,s:{p:n.getBoundingClientRect()[e],n:r.getBoundingClientRect()[e]},f:{p:+getComputedStyle(n).flexGrow,n:+getComputedStyle(r).flexGrow}}})}),window.addEventListener("mousemove",function(t){var e,n,r,i;return(i=u._.drag)&&1&t.buttons?(u.attr(),n=(e=(t="row"===u.dir()?t.clientX-i.ptr.x:t.clientY-i.ptr.y)<0?[i.p,i.n]:[i.n,i.p])[0],r=e[1],t<0?(i.s.p,i.s.n):(i.s.n,i.s.p),t=(e=t<0?[i.f.p,i.f.n]:[i.f.n,i.f.p])[1]+((i=e[0])-(i=0<(e=i+-Math.abs(t/u._.freeSpace)*u._.totalGrow)?e:0)),n.style.flexGrow=i,r.style.flexGrow=t):u._.drag=null}),this};e.prototype=((t=Object.create(Object.prototype)).init=function(){},t.dir=function(){var t;return(t=this._.dir)||(t=getComputedStyle(this.root),this._.dir="row"===(t=t.flexDirection||"row")||"row-reverse"===t?"row":"column")},t.attr=function(){return"row"===this.dir()?"width":"height"},t.estimate=function(){var t,e=this.attr(),n=Array.from(this.root.childNodes),r=n.map(function(t){return+getComputedStyle(t).flexGrow}),i=r.reduce(function(t,e){return t+e},0);return n.map(function(t){return t.style.flexGrow=0}),t=this.root.getBoundingClientRect()[e]-n.map(function(t){return t.getBoundingClientRect()[e]}).reduce(function(t,e){return t+e},0),n.map(function(t,e){return t.style.flexGrow=r[e]}),this._.freeSpace=t,this._.totalGrow=i},t.build=function(){var e;return this._.gutters=Array.from(this.root.querySelectorAll(this._.selector)),this._.gutterSet=new Set(this._.gutters),e=new Set,this._.gutters.map(function(t){return[t.previousSibling,t.nextSibling].map(function(t){if(!e.has(t))return e.add(t)})}),this._.panes=Array.from(e)},t.set=function(n){return null==n&&(n=[]),this._.panes.map(function(t,e){return t.style.flexGrow=n[e]||0}),this.estimate()},t),"undefined"!=typeof window&&null!==window?window.flexize=e:module.exports=e}.call(this);
